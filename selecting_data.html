<!DOCTYPE html>
<html lang="en">
    
<head>
  <title>The not-so-scary guide to R.</title>
    <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link href="https://fonts.googleapis.com/css2?family=Cabin&family=Roboto+Condensed:ital@1&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="fonts/icomoon/style.css">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/style.css">
        <link rel="icon" href="images/favicon.ico">
        <link rel="stylesheet" href="/styles/ocean.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
</head>

<body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">
                              
<div class="site-wrap">
  <div class="site-mobile-menu site-navbar-target">
    <div class="site-mobile-menu-header">
      <div class="site-mobile-menu-close mt-3">
        <span class="icon-close2 js-menu-toggle"></span>
      </div>
    </div>
  <div class="site-mobile-menu-body"></div>
</div>
                                          
<div class="header-top">
<div class="container">
<div class="row align-items-center">
<div class="col-12 col-lg-6 d-flex">
                                                  
<a href="index.html" class="site-logo">The not-so-scary guide to R.</a>
<img src="images/title_logo.png" alt="Image" class="logo-icon">
<a href="#" class="ml-auto d-inline-block d-lg-none site-menu-toggle js-menu-toggle text-black"><span class="icon-menu h3"></span></a>
</div>
<div class="col-12 col-lg-6 ml-auto d-flex">
<div class="ml-md-auto top-social d-none d-lg-inline-block">
<a href="https://github.com/adajam89" class="d-inline-block p-3"><span class="icon-github"></span></a>
<a href="https://www.flickr.com/photos/151552926@N03/" class="d-inline-block p-3"><span class="icon-flickr"></span></a>
<a href="https://twitter.com/JamieAdams_Psy" class="d-inline-block p-3"><span class="icon-twitter"></span></a>
<a href="https://www.instagram.com/jamie_adams89/" class="d-inline-block p-3"><span class="icon-instagram"></span></a>
 </div>
</div>
<div class="col-6 d-block d-lg-none text-right">
</div>
</div>
</div>
                                                      
                                                      
<div class="site-navbar py-2 js-sticky-header site-navbar-target d-none pl-0 d-lg-block" role="banner">
                                                      
<div class="container">
<div class="d-flex align-items-center">
                                                      
<div class="mr-auto">
<nav class="site-navigation position-relative text-right" role="navigation">
<ul class="site-menu main-menu js-clone-nav mr-auto d-none pl-0 d-lg-block">

<li><a href="index.html" class="nav-link text-left">index</a></li>
<li><a href="get_started.html" class="nav-link text-left">Get Started</a></li>
<li><a href="guides.html" class="nav-link text-left">Guides</a></li>
<li><a href="articles.html" class="nav-link text-left">Articles</a></li>     
<li><a href="about.html" class="nav-link text-left">About</a></li>
 
</ul></nav></div></div></div></div></div>


<!--------------------------------------------------------------------->              
<!--------------------------------------------------------------------->
<!--Title and image----------------------------------------------------> 
<!--------------------------------------------------------------------->
<!--------------------------------------------------------------------->                     
<div class="site-section">
<div class="container">
<div class="row">
<div class="col-lg-8 single-content">
<p class="mb-5"><img src="images/selecting_data_big.jpg" alt="Image" class="img-fluid"></p>  
<h1 class="mb-4">Selecting data.</h1>
<div class="post-meta d-flex mb-5">
<div class="bio-pic mr-3"><img src="images/profile_thumb.jpg" alt="Image" class="img-fluidid"></div>
<div class="vcard"><span class="d-block"><a href="about.html">Jamie Adams</a> in <a href="guides.html">Guides</a></span>
<span class="date-read">August 19<span class="mx-1">&bullet;</span>15-min read.<span class="icon-star2"></span></span><br>


<!--------------------------------------------------------------------->              
<!--------------------------------------------------------------------->
<!--Like / dislike button----------------------------------------------> 
<!--------------------------------------------------------------------->
<!---------------------------------------------------------------------> 
<span class="likebtn-wrapper" data-theme="custom" data-icon_l="arr15-u" data-icon_d="arr15-d" data-icon_l_c="#b4b4b4" data-icon_d_c="#b4b4b4" data-label_c="#b4b4b4" data-label_c_v="#b4b4b4" data-counter_l_c="#b4b4b4" data-counter_d_c="#b4b4b4" data-ef_voting="grow" data-white_label="true" data-identifier="item_1" data-show_like_label="false" data-counter_frmt="comma" data-counter_zero_show="true" data-popup_disabled="true" data-loader_show="true" data-i18n_like_tooltip="Like" data-i18n_dislike_tooltip="Dislike"></span>
<script>(function(d,e,s){if(d.getElementById("likebtn_wjs"))return;a=d.createElement(e);m=d.getElementsByTagName(e)[0];a.async=1;a.id="likebtn_wjs";a.src=s;m.parentNode.insertBefore(a, m)})(document,"script","//w.likebtn.com/js/w/widget.js");</script>
</div></div>


<!--------------------------------------------------------------------->              
<!--------------------------------------------------------------------->
<!--Content------------------------------------------------------------> 
<!--------------------------------------------------------------------->
<!--------------------------------------------------------------------->                                
<p>There are a number of simple, yet very powerful tools available in R when it comes to wrangling your data. Here we'll demonstrate just how easy it is to select, delete, group, and more. Before we begin, you'll first need to have some data in RStudio. If you're following on from the previous guide (<a href="importing_data_the_basics" class="red-link">Importing data: the basics</a>), you're already good to go! Just make sure you have the Project file you created last time open, along with the R script.</p>

<p>If you're jumping in fresh with this guide, simply copy and paste the code below into the Source window. Highlight everything, and then press "Run". This will bring you up to speed, and get some example data imported into RStudio for you:</p>

<pre>
  <code>
    install.packages('tidyverse')   # This installs the tidyverse package.
    library(tidyverse)              # This tells RStudio to load up the tidyverse package.

    example_coffee_data <- "https://raw.githubusercontent.com/adajam89/adajam89.github.io/master/coffee.csv"    # This is the location of some example data of mine that is stored online.
    coffee_data <- read_csv(url(example_coffee_data))   # Import the data.
  </code>
</pre>

<p>First, let's have a little look at the data to see what we're dealing with. To do this, we can type the name of the variable containing the data - "coffee_data" - into the Console panel at the bottom, and press Enter:</p>

<img src="images/selecting_data_1a.png" alt="Image" class="screenshot-no-border"><br><br><br>

<p>We can see that the dataset isn't too big. The note at the top: "# A tibble: 31 x 8", tells us that our data has 31 rows, and 8 columns. A 'tibble' is the type of structure in R that contains our data. If you look just below row 10 of the output, you should also see the notice "# â€¦ with 21 more rows". This tells us that the entire dataset is not being shown to us here. Instead, RStudio is just giving us a glimpse of the first 10 rows, so as not to clutter the Console. You may be wondering why it doesn't just show us the whole thing...imagine our data is much longer (e.g. 10,000 rows), and we were shown the entire dataset each time we typed in its name - it would soon become a nightmare to scroll up and down through the Console!</p>

<img src="images/selecting_data_2a.png" alt="Image" class="screenshot-no-border"><br><br><br>

<p>Fortunately, there's an easy way for us to view all of the data without cluttering the Console. Look to your Environment panel (located in the top right in my screenshots). This is where all of your variables are listed, for easy reference. Under the "Data" section, click on the "coffee_data" variable. A new tab will open up in the Source window that allows us to browse all rows and columns of the data:</p>

<img src="images/selecting_data_3a.png" alt="Image" class="screenshot-no-border"><br>

<p><b><i>Note:</i></b> If you're using your own data, now would be a good time to check that it is formatted in the 'correct' way. Specifically, we want each row to represent a unique 'case'. In other words, each participant should get their own row. In our example data, we could think of the different coffee names as individual participants. They each have their own row, and each have their own set of data toward a number of shared variables, such as 'strength', 'bitterness', and 'price'.</p>
<hr>

<br>
<p>Click back to your R script tab, and/or close the tab that shows the full "coffee_data" dataset. Whilst our example data here doesn't have too many columns, it's not uncommon to have a huge dataset that contains many hundreds of columns. Sometimes we just want to look at, or extract, a few columns that are interesting to us. We can do this using 'select'.</p>

<p>Let's imagine we're only interested in a tiny portion of "coffee_data" - the data contained in the 'price' column. We can access just this data (and drop the rest) by using the following code (paste this into your Console and press enter):</p>

<pre>
  <code>
    coffee_data %>%
      select(price)
  </code>
</pre>

<p>You should be presented with just the 'price' column - on it's own - in the Console. Let's break down why that little bit of code gave us this result.</p>

<p>First we wrote the name of the variable that stores the data we're interested in (coffee_data). We then use the 'pipe' symbol (%>%) to the right of this. It's somewhat hard to describe what this symbol means - it's just something that inexplicably makes total sense with practice - but essentially it's saying "follow on from", or "and then do this". It's an amazing tool that lets us give as many instructions as we want, all of which will be applied to the variable at the top. You could also think of it as going down a pipe <i>into</i> the variable at the top - once inside, everything we do only applies to that variable. In this instance, we just want to 'grab' the "price" column - we do this with the function 'select' and listing the name of the column we want to get in parentheses. The result is the 'price' column being shown to us in the Console. None of the other columns contained in "coffee_data" are shown to us, since we did not ask to select them:</p>

<img src="images/selecting_data_4a.png" alt="Image" class="screenshot-no-border"><br><br><br>

<p>To further demonstrate the 'pipe' operater (%>%), we'll also rename the 'price' column after we grab it. We can do this by adapting our code like this:</p>

<pre>
  <code>
    coffee_data %>%
      select(price) %>%
      rename(CoffeePrice = 'price')
  </code>
</pre>

<p>By adding another pipe operater (%>%) to the end of the second line, we're telling R that we want to keep on making changes <i>within</i> this variable. We then add a line that renames the column to 'CoffeePrice', from its original name 'price'. Note: this final line does not include %>% at the end, since we don't want to make anymore changes after it. This will rename the column when the result is shown to us:</p>

<img src="images/selecting_data_5a.png" alt="Image" class="screenshot-no-border"><br><br><br>

<p>Whenever we want to add more instructions (i.e. make additional transformations to our data), we can add %>% to the end of each line. We can add as many instructions as we like, and each will be completed in order from the top. Just remember, to do this, we always have to start with a variable at the top - this is the set of data that we actually want to apply these transformations <i>to</i>.</p>

<p>Just to make it clear, our current actions here did not alter the original 'coffee_data' dataset. Though we're being presented with just a single column right now, we have not overwritten or lost the rest of the columns. Rather, we just had a one-off peek at a column of interest contained within the full dataset. We can verify this by typing 'coffee_data' into the Console, and seeing that the full data is still intact.</p>

<p>In practice, it's often more useful to store these selections into a new variable, rather than have a one-time look. This allows us to access the results without having to type in the whole block of code each time. Add the following code to your R script in the Source window, highlight everything, and press "Run":</p>

<pre>
  <code>
    tidy_data <- coffee_data %>%
      select(price) %>%
      rename(CoffeePrice = 'price')
  </code>
</pre>

<p>Now type "tidy_data" into the Console and hit Enter to see the result. Here, we have created a brand new variable named "tidy_data". This is followed by the "<-" operater, which essentially stores the result of everything on the right into the variable name on the left (similar to =). We can once again break down each step of the above code to see how 'tidy_data' ends up the way it does:</p>
<!"---------------------------------------------------------------------> 
<p>First, we added the name of a new empty variable called "tidy_data", and then said that it equals 'coffee_data'. We can think of both variables as being identical at this point - both containing all of our data. We then go on to say "but only the 'price' column of 'coffee_data'". This makes our new variable distinct from the full data, as it now only contains one column of the full data, rather than everything. Finally, we say "and we also want to rename that column". The result of all of those steps is saved to the new variable "tidy_data":</p>

<img src="images/selecting_data_6a.png" alt="Image" class="screenshot-no-border"><br><br><br>

<p>In reality, we'll probably want to select more than a single column of interest. Luckily, it's equally easy to 'grab' as many columns as we want using 'select':</p>

<pre>
  <code>
    tidy_data <- coffee_data %>%
      select(name, size, price) %>%
      rename(CoffeeName = 'name', CoffeeSize = 'size', CoffeePrice = 'price')
  </code>
</pre>

<p>Here we've selected 3 columns of interest from the "coffee_data" dataset - name, size, and price (and renamed each of them): </p>

<img src="images/selecting_data_7a.png" alt="Image" class="screenshot-no-border"><br><br><br>

<p>Easy! But what if we have a big dataset (e.g. hundreds of columns) and only want to get rid of a few pesky columns? Obviously we don't want to write the name of every column we'd like to keep one-by-one, like above. Instead, we can simply add a minus symbol next to the column names we <i>don't</i> want:</p>

<pre>
  <code>
    tidy_data <- coffee_data %>%
      select(-acidity, -bitterness) %>%
      rename(CoffeeName = 'name', CoffeeSize = 'size', CoffeePrice = 'price')
  </code>
</pre>

<p>On the first line, "tidy_data" starts off as being identical to "coffee_data". On the second line, however, we ask it to <i>not</i> select the "acidity" and "bitterness" columns. We're negating the 'select' function. So at this point, we have everything <i>but</i> those two columns stored in "tidy_data". We can then make additional transformations, such as renaming, on the columns we have leftover:</p>

<img src="images/selecting_data_8a.png" alt="Image" class="screenshot-no-border"><br><br><br>

<p>Hopefully everything so far makes sense. At first, you might be wondering why there isn't just a 'delete column' button in RStudio - something similar to Excel, for example. This is because it's so easy to extract the data we want into a new variable, that's it not really worth the risk of losing precious data that we may end up needing later on. Better safe than sorry, right? If there's a column in "coffee_data" we forgot to add when creating the 'tidy_data' variable, it's super easy to add it back in whenever we like.</p>

<p>We <i>can</i> overwrite variables with changes like this, which is probably the closest thing R has to delete:
</p>

<pre>
  <code>
    coffee_data <- coffee_data %>%
      select(-acidity, -bitterness) %>%
      rename(CoffeeName = 'name', CoffeeSize = 'size', CoffeePrice = 'price')
  </code>
</pre>

<p>Rather than naming a new variable on the left of "<-", we can instead repeat "coffee_data". This is basically saying: "coffee_data" equals "coffee_data", but make these changes. The old "coffee_data" no longer exists, and we no longer have access to the "acidity" or "bitterness columns". This is fine when we know what we're doing, we just have to be careful we don't lose anything useful. This is still much safer than deleting a column in Excel, since here we've left the .csv data file fully intact. If for whatever reason we need those removed columns back...we can just import the .csv again and voila!</p>
<!"---------------------------------------------------------------------> 
<p>One thing we must remember when overwriting variables is the state the variable is currently in. For example, if we were to now run the above code again, we will be confronted with an error:</p>

<img src="images/selecting_data_9a.png" alt="Image" class="screenshot-no-border"><br><br>

<p>We're asking R to <i>not</i> select the "acidity" and "bitterness" columns...but it can't find those columns to begin with, and doesn't know how to comply. Remember, the current state of "coffee_data" doesn't have those columns, since we already droppped them the first time we ran this bit of code. When you're juggling a lot of variables, and making a number of transformations, it can sometimes be tricky to keep track of the potential cause of such issues. By routinely creating new variables when making transformations, we can avoid errors like this.</p>

<hr>
<p><b><i>Bonus tip:</i></b> 'Select' is also great for rearranging the order of our columns. When we specify the names of columns we want using 'select', the order we write them in will be the order of the output. We can change the order of columns whenever we want by overwriting the "coffee_data" dataset:</p>

<pre>
  <code>
    coffee_data <- coffee_data %>%
      select(CoffeeName, CoffeeSize, CoffeePrice, strength, roastiness, body)
  </code>
</pre>

<img src="images/selecting_data_10a.png" alt="Image" class="screenshot-no-border"><br><br>

<br><br>

<!--------------------------------------------------------------------->              
<!--------------------------------------------------------------------->
<!--Comments-----------------------------------------------------------> 
<!--------------------------------------------------------------------->
<!--------------------------------------------------------------------->
<script>
/* This code goes ABOVE the main HTML Comment Box code!
 replace the text in the single quotes below to customize labels.*/
hcb_user = {
    /* L10N */
    comments_header : 'Questions and Comments',
    name_label : 'Name...',
    content_label: 'Enter your comment here...',
    submit : 'Comment',
    logout_link : '<img title="log out" src="https://www.htmlcommentbox.com/static/images/door_out.png" alt="[logout]" class="hcb-icon hcb-door-out"/>',
    admin_link : '<img src="https://www.htmlcommentbox.com/static/images/door_in.png" alt="[login]" class="hcb-icon hcb-door-in"/>',
    no_comments_msg: '',
    add:'Add your comment',
    again: 'Post another comment',
    rss:'',
    said:'said:',
    prev_page:'<img src="https://www.htmlcommentbox.com/static/images/arrow_left.png" class="hcb-icon" title="previous page" alt="[prev]"/>',
    next_page:'<img src="https://www.htmlcommentbox.com/static/images/arrow_right.png" class="hcb-icon" title="next page" alt="[next]"/>',
    showing:'Showing',
    to:'to',
    website_label:'website (optional)',
    email_label:'email',
    anonymous:'Anonymous',
    mod_label:'(mod)',
    subscribe:'email me replies',
    add_image:'add image',
    are_you_sure:'Do you want to flag this comment as inappropriate?',
    reply:'<img src="https://www.htmlcommentbox.com/static/images/reply.png"/> reply',
    flag:'<img src="https://www.htmlcommentbox.com/static/images/flag.png"/> flag',
    like:'<img src="https://www.htmlcommentbox.com/static/images/like.png"/> like',
    /* dates */
    days_ago:'days ago',
    hours_ago:'hours ago',
    minutes_ago:'minutes ago',
    within_the_last_minute:'within the last minute',
    msg_thankyou:'Thank you for commenting!',
    msg_approval:'(this comment is not published until approved)',
    msg_approval_required:'Thank you for commenting! Your comment will appear once approved by a moderator.',
    err_bad_html:'Your comment contained bad html.',
    err_bad_email:'Please enter a valid email address.',
    err_too_frequent:'You must wait a few seconds between posting comments.',
    err_comment_empty:'Your comment was not posted because it was empty!',
    err_denied:'Your comment was not accepted.',
    err_unknown:'Your comment was blocked for unknown reasons, please report this.',
    err_spam:'Your comment was detected as spam.',
    err_blocked:'Your comment was blocked by site policy.',
    /* SETTINGS */
    MAX_CHARS: 8192,
    PAGE:'', /* ID of the webpage to show comments for. defaults to the webpage the user is currently visiting. */
    ON_COMMENT: function(){}, /* Function to call after commenting. */
    RELATIVE_DATES:true /* show dates in the form "X hours ago." etc. */
};
</script>
<!-- done customizing labels of htmlcommentbox.com -->
<!-- begin wwww.htmlcommentbox.com -->
 <div id="HCB_comment_box"><a href="http://www.htmlcommentbox.com">Comment Form</a> is loading comments...</div>
 <link rel="stylesheet" type="text/css" href="https://www.htmlcommentbox.com/static/skins/bootstrap/twitter-bootstrap.css?v=0" />
 <script type="text/javascript" id="hcb"> /*<!--*/ if(!window.hcb_user){hcb_user={};} (function(){var s=document.createElement("script"), l=hcb_user.PAGE || (""+window.location).replace(/'/g,"%27"), h="https://www.htmlcommentbox.com";s.setAttribute("type","text/javascript");s.setAttribute("src", h+"/jread?page="+encodeURIComponent(l).replace("+","%2B")+"&mod=%241%24wq1rdBcg%24cN5QsIMggP%2Fz8riZ7KvEy1"+"&opts=16862&num=10&ts=1597230251795");if (typeof s!="undefined") document.getElementsByTagName("head")[0].appendChild(s);})(); /*-->*/ </script>


<!--------------------------------------------------------------------->              
<!--------------------------------------------------------------------->
<!--More guides (bit on the right)-------------------------------------> 
<!--------------------------------------------------------------------->
<!--------------------------------------------------------------------->
<div class="pt-5">
<div class="section-title">
</div>
<div class="comment-form-wrap pt-5">
<div class="section-title">
</div></div></div></div>
<div class="col-lg-3 ml-auto">
<div class="section-title">
<h2>More guides:</h2>
</div>
     
<div class="trend-entry d-flex">
<div class="number align-self-start">01</div>
<div class="trend-contents">
<h2><a href="get_started.html">Get started.</a></h2>
<div class="post-meta">
<span class="d-block">In: <a href="guides.html">Guides</a></span>
<span class="date-read">August 14<span class="mx-1">&bullet;</span>10-min read</span>
</div></div></div>                  
                  
<div class="trend-entry d-flex">
<div class="number align-self-start">02</div>
<div class="trend-contents">
<h2><a href="importing_data_the_basics.html">Importing data: the basics.</a></h2>
<div class="post-meta">
<span class="d-block">In: <a href="guides.html">Guides</a></span>
<span class="date-read">August 14<span class="mx-1">&bullet;</span>10-min read</span>
</div></div></div>
                                          
<div class="trend-entry d-flex">
<div class="number align-self-start">03</div>
<div class="trend-contents-current">
<h2><a href="selecting_data.html">Selecting data.</a></h2>
<div class="post-meta-current">
<span class="d-block">In: <a href="guides.html">Guides</a></span>
<span class="date-read">August 19<span class="mx-1">&bullet;</span>15-min read</span>
</div></div></div>
                     
                                              
<p><a href="https://adajam89.github.io/guides.html" class="more">See All Guides<span class="icon-keyboard_arrow_right"></span></a></p></div></div></div></div>
                                          
<footer> <small>&copy; Copyright 2020, Jamie Adams</small> </footer></div>
                                          
                           
<!--------------------------------------------------------------------->              
<!--------------------------------------------------------------------->
<!--Loader-------------------------------------------------------------> 
<!--------------------------------------------------------------------->
<!--------------------------------------------------------------------->

<div id="loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#ff5e15"/></svg></div>
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/jquery-migrate-3.0.1.min.js"></script>
<script src="js/jquery-ui.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.stellar.min.js"></script>
<script src="js/jquery.countdown.min.js"></script>
<script src="js/bootstrap-datepicker.min.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/aos.js"></script>
<script src="js/jquery.fancybox.min.js"></script>
<script src="js/jquery.sticky.js"></script>
<script src="js/jquery.mb.YTPlayer.min.js"></script>
<script src="js/main.js"></script>
</body>
</html>